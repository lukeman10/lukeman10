<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tap Jump Game</title>
<style>
  body {
    margin: 0;
    overflow: hidden;
    font-family: sans-serif;
    background: #87ceeb;
  }
  canvas {
    display: block;
    background: #87ceeb;
  }
  #score {
    position: absolute;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 24px;
    color: white;
    font-weight: bold;
    text-shadow: 1px 1px 2px black;
  }
</style>
</head>
<body>
<div id="score">Score: 0</div>
<canvas id="gameCanvas"></canvas>
<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let score = 0;
const gravity = 0.6;
let gameOver = false;

const player = {
  x: 50,
  y: canvas.height / 2,
  width: 50,
  height: 50,
  dy: 0,
  color: 'yellow'
};

const obstacles = [];
const obstacleWidth = 60;
const gap = 200;

function createObstacle() {
  const heightTop = Math.random() * (canvas.height - gap - 100) + 50;
  obstacles.push({
    x: canvas.width,
    yTop: 0,
    heightTop: heightTop,
    yBottom: heightTop + gap,
    heightBottom: canvas.height - heightTop - gap,
    color: 'green'
  });
}

function drawPlayer() {
  ctx.fillStyle = player.color;
  ctx.fillRect(player.x, player.y, player.width, player.height);
}

function drawObstacles() {
  obstacles.forEach(obs => {
    ctx.fillStyle = obs.color;
    ctx.fillRect(obs.x, obs.yTop, obstacleWidth, obs.heightTop);
    ctx.fillRect(obs.x, obs.yBottom, obstacleWidth, obs.heightBottom);
  });
}

function updatePlayer() {
  player.dy += gravity;
  player.y += player.dy;

  if (player.y + player.height > canvas.height) {
    player.y = canvas.height - player.height;
    player.dy = 0;
    gameOver = true;
  }

  if (player.y < 0) {
    player.y = 0;
    player.dy = 0;
  }
}

function updateObstacles() {
  obstacles.forEach(obs => {
    obs.x -= 5;

    // Collision detection
    if (
      player.x < obs.x + obstacleWidth &&
      player.x + player.width > obs.x &&
      (player.y < obs.yTop + obs.heightTop || player.y + player.height > obs.yBottom)
    ) {
      gameOver = true;
    }

    if (!obs.passed && obs.x + obstacleWidth < player.x) {
      score++;
      document.getElementById('score').innerText = `Score: ${score}`;
      obs.passed = true;
    }
  });

  if (obstacles.length > 0 && obstacles[0].x + obstacleWidth < 0) {
    obstacles.shift();
  }
}

function gameLoop() {
  if (gameOver) {
    ctx.fillStyle = 'rgba(0,0,0,0.5)';
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    ctx.fillStyle = 'white';
    ctx.font = '48px sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('Game Over', canvas.width / 2, canvas.height / 2);
    ctx.font = '24px sans-serif';
    ctx.fillText(`Score: ${score}`, canvas.width / 2, canvas.height / 2 + 40);
    return;
  }

  ctx.clearRect(0, 0, canvas.width, canvas.height);

  drawPlayer();
  drawObstacles();
  updatePlayer();
  updateObstacles();

  requestAnimationFrame(gameLoop);
}

// Tap to jump
window.addEventListener('touchstart', () => {
  if (!gameOver) {
    player.dy = -10;
  } else {
    location.reload();
  }
});

// Generate obstacles every 2 seconds
setInterval(() => {
  if (!gameOver) createObstacle();
}, 2000);

gameLoop();
</script>
</body>
</html>
