<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ü•î Potato Siege ü•î</title>
<style>
  body {
    margin: 0;
    background: linear-gradient(#6b4a1e, #2d1a05);
    color: #fff;
    font-family: Arial, sans-serif;
    overflow: hidden;
  }

  #hud {
    position: fixed;
    top: 10px;
    left: 10px;
    font-size: 18px;
  }

  #gameOver {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.8);
    display: none;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    font-size: 32px;
  }

  #player {
    position: absolute;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 50px;
  }

  .potato {
    position: absolute;
    font-size: 36px;
  }

  .shake {
    animation: shake 0.2s;
  }

  @keyframes shake {
    0% { transform: translate(0,0); }
    25% { transform: translate(5px,0); }
    50% { transform: translate(-5px,0); }
    75% { transform: translate(5px,0); }
    100% { transform: translate(0,0); }
  }

  button {
    margin-top: 20px;
    padding: 10px 18px;
    font-size: 18px;
    cursor: pointer;
  }
</style>
</head>
<body>

<div id="hud">
  Score: <span id="score">0</span><br>
  Combo: <span id="combo">x1</span><br>
  Sacks: <span id="lives">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</span>
</div>

<div id="player">üë®‚Äçüåæ</div>

<div id="gameOver">
  <div>ü•î POTATO SIEGE OVER ü•î</div>
  <div id="finalScore" style="font-size:20px;margin-top:10px;"></div>
  <button onclick="restart()">Restart</button>
</div>

<script>
let score = 0;
let combo = 1;
let lives = 3;
let speed = 1.5;
let spawnRate = 900;
let running = true;

const player = document.getElementById("player");
const scoreEl = document.getElementById("score");
const comboEl = document.getElementById("combo");
const livesEl = document.getElementById("lives");
const gameOverEl = document.getElementById("gameOver");
const finalScoreEl = document.getElementById("finalScore");

let playerX = window.innerWidth / 2;

document.addEventListener("keydown", e => {
  if (!running) return;
  if (e.key === "ArrowLeft" || e.key === "a") playerX -= 40;
  if (e.key === "ArrowRight" || e.key === "d") playerX += 40;
  playerX = Math.max(0, Math.min(window.innerWidth - 50, playerX));
  player.style.left = playerX + "px";
});

function spawnPotato() {
  if (!running) return;

  const p = document.createElement("div");
  p.className = "potato";

  const roll = Math.random();
  if (roll < 0.7) p.textContent = "ü•î";
  else if (roll < 0.9) p.textContent = "ü•á";
  else p.textContent = "üí£";

  p.style.left = Math.random() * (window.innerWidth - 40) + "px";
  p.style.top = "-40px";

  let y = -40;

  document.body.appendChild(p);

  function fall() {
    if (!document.body.contains(p)) return;

    y += speed;
    p.style.top = y + "px";

    const playerRect = player.getBoundingClientRect();
    const pRect = p.getBoundingClientRect();

    if (
      pRect.bottom > playerRect.top &&
      pRect.left < playerRect.right &&
      pRect.right > playerRect.left
    ) {
      handleCatch(p.textContent);
      p.remove();
      return;
    }

    if (y > window.innerHeight) {
      miss();
      p.remove();
      return;
    }

    requestAnimationFrame(fall);
  }

  fall();
}

function handleCatch(type) {
  if (type === "üí£") {
    loseLife();
    combo = 1;
  } else {
    let points = type === "ü•á" ? 5 : 1;
    score += points * combo;
    combo++;
  }
  updateUI();
}

function miss() {
  combo = 1;
  loseLife();
}

function loseLife() {
  lives--;
  document.body.classList.add("shake");
  setTimeout(() => document.body.classList.remove("shake"), 200);

  if (lives <= 0) endGame();
  updateUI();
}

function updateUI() {
  scoreEl.textContent = score;
  comboEl.textContent = "x" + combo;
  livesEl.textContent = "‚ù§Ô∏è".repeat(lives);
}

function endGame() {
  running = false;
  finalScoreEl.textContent = "Final Score: " + score;
  gameOverEl.style.display = "flex";
}

function restart() {
  document.querySelectorAll(".potato").forEach(p => p.remove());
  score = 0;
  combo = 1;
  lives = 3;
  speed = 1.5;
  spawnRate = 900;
  running = true;
  updateUI();
  gameOverEl.style.display = "none";
}

setInterval(() => {
  if (running) {
    spawnPotato();
    speed += 0.03;
    spawnRate = Math.max(300, spawnRate - 5);
  }
}, spawnRate);
</script>

</body>
</html>
